.chapter-1 {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  overflow: hidden;
}

/**
 * effects
 */
.chapter-1__effects {
  .effect {
    position: absolute;
    width: 80vmin; height: 80vmin;
    
    &::before, &::after {
      content: ""; display: block;
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border-radius: 50%;
      transform: scale(0);
    }
    &::before { background-color: $theme-color-red; }
    &::after  { background-color: #fff; }
  }
  .effect:nth-child(1) { top: -40vmin; left: -40vmin; }
  .effect:nth-child(2) { top: calc(50% - 40vmin); left: calc(50% - 40vmin); }
  .effect:nth-child(3) { bottom: -40vmin; right: -40vmin; }
}

/*** 共通: panel, text ***/
.chapter-1__panel,
.chapter-1__text {
  position: absolute;
  top: 0; left: calc(50% - 10vh);
  width: 20vh; height: 100vh;
}

/**
 * text
 */
.chapter-1__text {
  opacity: 0;
  .char {
    width: 20vh; height: 20vh;
    background-size: 55%;
    background-position: center;
    background-repeat: no-repeat;
  }
  .char:nth-child(1) { background-image: url(../images/chapter-1/cowardly-witch/1.svg); }
  .char:nth-child(2) { background-image: url(../images/chapter-1/cowardly-witch/2.svg); }
  .char:nth-child(3) { background-image: url(../images/chapter-1/cowardly-witch/3.svg); }
  .char:nth-child(4) { background-image: url(../images/chapter-1/cowardly-witch/4.svg); }
  .char:nth-child(5) { background-image: url(../images/chapter-1/cowardly-witch/5.svg); }
}

/**
 * panel
 */
.chapter-1__panel {
  display: flex;

  &::before, &::after {
    content: ""; display: block;
    width: 50%; height: 100%;
    background-color: $theme-color-red;
    transform: translateY(100%);
  }
}

/**
 * end
 */
.chapter-1__end {
  .view {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transform-origin: right bottom;
    transform: rotate(90deg);
  }
  .view:nth-child(1) { background-color: $theme-color-red; }
  .view:nth-child(2) { background-color: $theme-color-yellow; }
  .view:nth-child(3) { background-color: $theme-color-navy; }
}


/****************************************************************************************
  animation
*****************************************************************************************/
.chapter-1[data-state="active"] {
  .chapter-1__effects {
    .effect:nth-child(1) {
      animation: fadeout 0.1s ease 0.5s forwards;
      &::before { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0s forwards; }
      &::after  { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0.1s forwards; }
    }
    .effect:nth-child(2) {
      animation: fadeout 0.1s ease 0.7s forwards;
      &::before { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0.2s forwards; }
      &::after  { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0.3s forwards; }
    }
    .effect:nth-child(3) {
      animation: fadeout 0.1s ease 0.9s forwards;
      &::before { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0.4s forwards; }
      &::after  { animation: scale0-1 0.4s cubic-bezier(0.18, 0.67, 0.03, 0.99) 0.5s forwards; }
    }
  }
  .chapter-1__panel {
    &::before {
      animation:
        slide-bottom 0.4s cubic-bezier(0.94, 0.01, 0.04, 0.96) 1s forwards,
        slide-top 0.4s cubic-bezier(0.94, 0.01, 0.04, 0.96) 1.4s reverse forwards;
    }
    &::after {
      animation:
        slide-top 0.4s cubic-bezier(0.94, 0.01, 0.04, 0.96) 1s forwards,
        slide-bottom 0.4s cubic-bezier(0.94, 0.01, 0.04, 0.96) 1.4s reverse forwards;
    }
  }
  .chapter-1__text {
    animation: fadein 0.1s ease 1.4s forwards;
    .char:nth-child(1) { animation: chapter-1__hidden-char-1 0.5s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.0s forwards; }
    .char:nth-child(2) { animation: chapter-1__hidden-char-2 0.5s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.1s forwards; }
    .char:nth-child(3) { animation: chapter-1__hidden-char-1 0.5s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.2s forwards; }
    .char:nth-child(4) { animation: chapter-1__hidden-char-2 0.5s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.3s forwards; }
    .char:nth-child(5) { animation: chapter-1__hidden-char-1 0.5s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.4s forwards; }
  }
  .chapter-1__end {
    .view:nth-child(1) { animation: chapter-1__rotate-view 0.6s cubic-bezier(0.94, 0.01, 0.04, 0.96) 2.9s forwards; }
    .view:nth-child(2) { animation: chapter-1__rotate-view 0.6s cubic-bezier(0.94, 0.01, 0.04, 0.96) 3.1s forwards; }
    .view:nth-child(3) { animation: chapter-1__rotate-view 0.6s cubic-bezier(0.94, 0.01, 0.04, 0.96) 3.3s forwards; }
  }
}